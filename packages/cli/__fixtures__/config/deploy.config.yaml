apiVersion: interweb.dev/v1
kind: Application
metadata:
  name: test-app
  namespace: default
spec:
  services:
    - name: web-service
      image: nginx:1.21
      port: 80
      replicas: 2
      env:
        ENV: production
        DEBUG: "false"
      resources:
        requests:
          memory: "128Mi"
          cpu: "100m"
        limits:
          memory: "256Mi"
          cpu: "200m"
    - name: api-service
      image: node:18-alpine
      port: 3000
      replicas: 1
      env:
        NODE_ENV: production
        PORT: "3000"
      resources:
        requests:
          memory: "256Mi"
          cpu: "200m"
        limits:
          memory: "512Mi"
          cpu: "500m"
  database:
    type: postgresql
    name: test-db
    namespace: default
    config:
      instances: 1
      storage: "2Gi"
      resources:
        requests:
          memory: "512Mi"
          cpu: "250m"
        limits:
          memory: "1Gi"
          cpu: "500m"
  ingress:
    enabled: true
    host: test-app.local
    path: /
    tls: false