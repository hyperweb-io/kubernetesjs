# Global defaults
global:
  labels: {}

nameOverride: ""

cnpg:
  operator:
    enabled: true
  namespace:
    name: postgres-db
    create: true
    labels:
      app.interweb.dev/managed: "true"
  secrets:
    superuser:
      create: true
      name: postgres-superuser
      username: postgres
      password: postgres123!
    app:
      create: true
      name: postgres-app-user
      username: appuser
      password: appuser123!
  cluster:
    enabled: true
    name: postgres-cluster
    instances: 1
    image:
      repository: ghcr.io/cloudnative-pg/postgresql
      tag: 16.4
      pullPolicy: IfNotPresent
    storage:
      size: 2Gi
      storageClass: ""
    resources:
      requests:
        cpu: 50m
        memory: 256Mi
      limits:
        cpu: 200m
        memory: 512Mi
    postgresql:
      parameters:
        shared_buffers: 256MB
        effective_cache_size: 1GB
        maintenance_work_mem: 64MB
        checkpoint_completion_target: "0.9"
        wal_buffers: 16MB
        default_statistics_target: "100"
        random_page_cost: "1.1"
        effective_io_concurrency: "200"
        max_connections: "200"
        password_encryption: scram-sha-256
    bootstrap:
      database: postgres
      createAppUser: true
      enableDataChecksums: true
      encoding: UTF8
      localeCollate: en_US.UTF-8
      localeCType: en_US.UTF-8
      extraSQL: []
    monitoring:
      enablePodMonitor: false
    affinity:
      enablePodAntiAffinity: true
      topologyKey: kubernetes.io/hostname
      podAntiAffinityType: preferred
  pooler:
    enabled: true
    name: postgres-pooler
    instances: 1
    mode: transaction
    parameters:
      default_pool_size: "10"
      max_client_conn: "100"
      max_db_connections: "10"
      max_user_connections: "10"
      server_reset_query: DISCARD ALL
      log_connections: "1"
      log_disconnections: "1"
      log_pooler_errors: "1"
      server_idle_timeout: "30"
      client_idle_timeout: "60"
      server_login_retry: "5"
      query_timeout: "30"
      ignore_startup_parameters: extra_float_digits
      application_name_add_host: "1"
    resources:
      requests:
        cpu: 20m
        memory: 32Mi
      limits:
        cpu: 100m
        memory: 128Mi
    template:
      annotations: {}
      labels: {}
      nodeSelector: {}
      tolerations: []

minio:
  operator:
    enabled: true
  namespace:
    name: minio
    create: true
    labels:
      app.interweb.dev/managed: "true"
  credsSecret:
    create: true
    name: interweb-minio-creds
    accessKey: minioadmin
    secretKey: minioadmin
  tenant:
    enabled: true
    name: interweb-tenant
    image:
      repository: quay.io/minio/minio
      tag: RELEASE.2024-08-17T00-00-00Z
      pullPolicy: IfNotPresent
    requestAutoCert: false
    exposeServices:
      minio: true
      console: true
    pools:
      - name: pool-0
        servers: 1
        volumesPerServer: 1
        size: 2Gi
        storageClassName: ""
        accessModes:
          - ReadWriteOnce
        resources:
          requests:
            cpu: 100m
            memory: 256Mi
          limits:
            cpu: 250m
            memory: 512Mi
    buckets:
      - name: interweb-app
        region: us-east-1
    console:
      ingress:
        enabled: false
        host: ""
        className: ""
        annotations: {}
        tlsSecretName: ""
